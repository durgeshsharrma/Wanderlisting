<% layout("/layouts/Boilerplate.ejs") %>

<div class="row">
    <div class="col-8 offset-3">
        <h3 style="margin-top: 1rem;"><%= listing.title %></h3>
    </div>
    <div class="card listing-card col-6 offset-3">
            <img src="<%= listing.image %>" class="show-img" " class="card-img-top" alt="listing-image">
    
            <div class="card-body">
              <p class="card-text">
                <%= listing.description %><br>
                  &#8377; <%= listing.price %> <br>
                  <%= listing.location %> <br>
                  <%= listing.country %>
                  
            
              </p>
            </div>

           
      </div><br>
      <div class="btns col-6 offset-3">
        <a href="/home/<%= listing._id %>/edit"><button  class="btn btn-danger">Edit</button></a>
        <form action="/home/<%= listing._id %>?_method=DELETE" method="post"><button class="btn offset-5 btn-dark">Delete</button></form>
      </div>



      <div class="col-8 offset-3">
        <hr>
        <h4>Leave Review</h4>
        <form method="post" action="/home/<%= listing._id %>/reviews" class="needs-validation" novalidate>
          <div class="mt-3 mb-3">
            <label for="rating" class="form-label">Rating</label>
            <input type="range" min="1" max="5" class="form-range" id="rating" name="review[rating]" required>
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>
          <div class="mb-3">
            <label for="comment" class="form-label">comment</label>
            <textarea  rows="5" class="form-control" id="comment" name="review[comment]" required></textarea>
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>
          
          <div class="col-3 mb-3">
            <button class="btn btn-primary" type="submit">Submit form</button>
          </div>
        </form>


        
      <hr>
       
        <h4>All Reviews</h4>
        <div class="row ">
          <% for(let review of listing.review) {%>
            <div class="card p-3 ms-3 bg-light mb-3 col-5" >
             
              <div class="card-body">
                <div class="card-title">
                 <h5 class="text-primary"> <b>jane Doe</b> </h5>
                </div>
                <p class="card-text"><%= review.comment %></p>
                <p class="card-text"><%= review.rating %> Star</p>
              </div>
              <form method="post" action="/home/<%= listing._id %>/reviews/<%= review._id %>?_method=DELETE">
                <button class="btn btn-sm mt-3 btn-dark ">Delete</button>
              </form>
            </div>
            <% } %>
        </div>
      
      </div>
      
     
      
</div>


    
